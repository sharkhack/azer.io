function addImage(e){var t=document.createElement("div");t.className="row",t.innerHTML='<div class="cell image" style="padding-right:5px;">  <img /></div><div class="cell color">  <div class="box"></div>  <ul>    <li class="rgb"></li>    <li class="hex"></li>    <li class="hsl"></li>  </ul></div>';var a=t.querySelector("img");a.src=URL.createObjectURL(e),a.onload=function(){var e=getAverageColor(a),n=rgbToHsl(e.r,e.g,e.b),r="rgb("+e.r+", "+e.g+", "+e.b+")",l="#"+("0"+e.r.toString(16)).slice(-2)+("0"+e.g.toString(16)).slice(-2)+("0"+e.b.toString(16)).slice(-2),o="hsl("+Math.round(360*n.h)+", "+Math.round(100*n.s)+"%, "+Math.round(100*n.l)+"%)";t.querySelector(".box").style.backgroundColor=r,t.querySelector(".rgb").textContent=r,t.querySelector(".hex").textContent=l,t.querySelector(".hsl").textContent=o},document.getElementById("images").appendChild(t)}function getAverageColor(e){var t=document.createElement("canvas"),a=t.getContext("2d"),n=t.width=e.naturalWidth,r=t.height=e.naturalHeight;a.drawImage(e,0,0);for(var l=a.getImageData(0,0,n,r).data,o=0,c=0,i=0,g=0,d=l.length;g<d;g+=4)o+=l[g],c+=l[g+1],i+=l[g+2];return{r:o=Math.floor(o/(l.length/4)),g:c=Math.floor(c/(l.length/4)),b:i=Math.floor(i/(l.length/4)),imgData:l,length:l.length}}function rgbToHsl(e,t,a){e/=255,t/=255,a/=255;var n,r,l=Math.max(e,t,a),o=Math.min(e,t,a),c=(l+o)/2;if(l==o)n=r=0;else{var i=l-o;switch(r=c>.5?i/(2-l-o):i/(l+o),l){case e:n=(t-a)/i+(t<a?6:0);break;case t:n=(a-e)/i+2;break;case a:n=(e-t)/i+4}n/=6}return{h:n,s:r,l:c}}function handleImages(e){document.getElementById("images").innerHTML="";for(var t=0;t<e.length;t++)addImage(e[t])}document.ondragover=function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},document.ondrop=function(e){e.preventDefault(),handleImages(e.dataTransfer.files)},function(){var e=document.getElementById("upload"),t=document.getElementById("target");e.onchange=function(){handleImages(this.files)},t.onclick=function(){e.click()}}();